function [img] = makeSinMask(rStimulus, startDecay, rThresh)% Function makes array with circular mask.% Mask is a flat with sinusoid decay at the edge%% rStimulus:  radius of the entire stimulus %             (size of final matrix will be 2*rStimulus+1)% startDecay: at which eccentricity starts the mask decay% rThresh:    at which eccentricity should the mask be full%% Example: img = MakeSinMask(50,30,45);%          imagesc(img); colormap grayif nargin < 3; rThresh = rStimulus; end[x,y]       = meshgrid( -rStimulus:rStimulus, -rStimulus:rStimulus );eccen       = sqrt( x.^2 + y.^2 );   % eccentricity of each point in grid relative to center of 2D imagerDistCenter = abs( eccen );          % radial distance to center of gaussian window for every point in imageimg         = double( rDistCenter < rThresh );rDistCenter = img.* rDistCenter;edgeDecay   = cos( linspace( pi, 2*pi, rThresh-startDecay+1 ) ) ./ 2 + 0.5;for idx = 1:length(edgeDecay)    img( rDistCenter >= startDecay - 1 + idx ) = 1 - edgeDecay(idx);endend