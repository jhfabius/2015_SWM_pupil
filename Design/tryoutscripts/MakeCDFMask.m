function [img] = MakeCDFMask(rStimulus, startDecay, rThresh)% Function makes array with circular mask.% Mask is a flattened 2D gauss%% rStimulus:  radius of the entire stimulus %             (size of final matrix will be 2*rStimulus+1)% startDecay: at which eccentricity starts the mask decay% rThresh:    at which eccentricity should the mask be full%% Example: img = MakeCDFMask(50,30,45);%          imagesc(img); colormap grayif nargin < 3; rThresh = rStimulus; end[x,y]       = meshgrid(-rStimulus:rStimulus,-rStimulus:rStimulus);eccen       = sqrt((x).^2+(y).^2); % calculate eccentricity of each point in grid relative to center of 2D imagerDistCenter = abs(eccen);          % calculate radial distance to center of gaussian window for every point in imageimg         = double(rDistCenter < rThresh);rDistCenter = img.* rDistCenter;edgeDecay   = normcdf( linspace(0,1,rThresh-startDecay+1) ,0.5 ,0.15 );for i = 1:length(edgeDecay)    img( rDistCenter >= startDecay-1+i) = 1-edgeDecay(i);endend